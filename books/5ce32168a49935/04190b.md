---
title: "副作用を起こす ~useEffect~"
free: false
---

# 基本
`useEffect`は副作用を起こすための関数です。基本的な使い方は以下のようになります。
```javascript
useEffect(() => {
    console.log("hello");
}, []);
```
`useEffect(func, deps)`というシグニチャになっており、以下のような値を渡します。
* 第一引数・・・副作用として実行したい関数
* 第二引数・・・副作用を実行する契機となる変数の配列


順を追って説明します。

## 第一引数の関数
第一引数には、副作用として実行したい関数を渡します。前述した例では`console.log("hello")`を渡すことで、副作用としてコンソールにログを出力しています。よくある使い方としてはマウント時にAPIを実行したりすることが多いでしょうか。

## 第二引数の配列
第二引数には、副作用を起こすタイミングを制御するための配列を渡すことができます。（省略可能）


# 第二引数に渡す値による挙動
第二引数に渡す配列による副作用の実行タイミングをまとめました。

## レンダーごとに副作用を実行する
第二引数を渡さなければレンダーごとに副作用が実行されます。ただし、レンダーごとに副作用を起こしたいというシーンもそう多くないと思いますので、これが出てきた場合は注意した方がいいかもしれません。

```javascript
useEffect(() => {
    console.log("hello");
})
```
## マウント時のみ副作用を実行する
第二引数にから配列（`[]`）を渡すことで、マウント時のみ実行するようになります。
```javascript
useEffect(() => {
    console.log("hello");
}, [])
```

## アンマウント時のみ副作用を実行する

```javascript
useEffect(() => {
    return () => {
        console.log("hello");
    }
}, [])
```

## 特定の変数が変化した時のみ副作用を実行する

```javascript
useEffect(() => {
    console.log(count);
}, [count])
```

# 注意点
`useEffect`は、